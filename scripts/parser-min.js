var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){"use strict";var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=t.URL||t.webkitURL||t,i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in i,o=function(r){var n=e.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},u=t.webkitRequestFileSystem,s=t.requestFileSystem||u||t.mozRequestFileSystem,l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",d=0,f=[],h=function(){for(var t=f.length;t--;){var e=f[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}f.length=0},p=function(t,e,r){e=[].concat(e);for(var n=e.length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(a){l(a)}}},g=function(e,n){var l=this,h=e.type,g=!1,C,v,y=function(){var t=r().createObjectURL(e);return f.push(t),t},b=function(){p(l,"writestart progress write writeend".split(" "))},m=function(){(g||!C)&&(C=y(e)),v&&(v.location.href=C),l.readyState=l.DONE,b()},S=function(t){return function(){return l.readyState!==l.DONE?t.apply(this,arguments):void 0}},w={create:!0,exclusive:!1},A;return l.readyState=l.INIT,n||(n="download"),a?(C=y(e),i.href=C,i.download=n,o(i),l.readyState=l.DONE,void b()):(t.chrome&&h&&h!==c&&(A=e.slice||e.webkitSlice,e=A.call(e,0,e.size,c),g=!0),u&&"download"!==n&&(n+=".download"),v=h===c||u?t:t.open(),s?(d+=e.size,void s(t.TEMPORARY,d,S(function(t){t.root.getDirectory("saved",w,S(function(t){var r=function(){t.getFile(n,w,S(function(t){t.createWriter(S(function(r){r.onwriteend=function(e){v.location.href=t.toURL(),f.push(t),l.readyState=l.DONE,p(l,"writeend",e)},r.onerror=function(){var t=r.error;t.code!==t.ABORT_ERR&&m()},"writestart progress write abort".split(" ").forEach(function(t){r["on"+t]=l["on"+t]}),r.write(e),l.abort=function(){r.abort(),l.readyState=l.DONE},l.readyState=l.WRITING}),m)}),m)};t.getFile(n,{create:!1},S(function(t){t.remove(),r()}),S(function(t){t.code===t.NOT_FOUND_ERR?r():m()}))}),m)}),m)):void m())},C=g.prototype,v=function(t,e){return new g(t,e)};return C.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},C.readyState=C.INIT=0,C.WRITING=1,C.DONE=2,C.error=C.onwritestart=C.onprogress=C.onwrite=C.onabort=C.onerror=C.onwriteend=null,t.addEventListener("unload",h,!1),v}(self),JSZip=function(t,e){this.files={},this.root="",t&&this.load(t,e)};JSZip.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},JSZip.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},JSZip.prototype=function(){var t=function(t,e,r){this.name=t,this.data=e,this.options=r};t.prototype={asText:function(){var t=this.data;return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=JSZipBase64.decode(t)),this.options.binary&&(t=JSZip.prototype.utf8decode(t)),t)},asBinary:function(){var t=this.data;return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=JSZipBase64.decode(t)),this.options.binary||(t=JSZip.prototype.utf8encode(t)),t)},asUint8Array:function(){return JSZip.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return JSZip.utils.string2Uint8Array(this.asBinary()).buffer}};var e=function(t,e){var r="",n;for(n=0;e>n;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},r=function(){var t={},e,r;for(e=0;e<arguments.length;e++)for(r in arguments[e])arguments[e].hasOwnProperty(r)&&"undefined"==typeof t[r]&&(t[r]=arguments[e][r]);return t},n=function(t){return t=t||{},t.base64===!0&&null==t.binary&&(t.binary=!0),t=r(t,JSZip.defaults),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},i=function(e,r,i){var u=a(e);if(u&&o.call(this,u),i=n(i),i.dir||null===r||"undefined"==typeof r)i.base64=!1,i.binary=!1,r=null;else if(JSZip.support.uint8array&&r instanceof Uint8Array)i.base64=!1,i.binary=!0,r=JSZip.utils.uint8Array2String(r);else if(JSZip.support.arraybuffer&&r instanceof ArrayBuffer){i.base64=!1,i.binary=!0;var s=new Uint8Array(r);r=JSZip.utils.uint8Array2String(s)}else i.binary&&!i.base64&&(i.optimizedBinaryString!==!0&&(r=JSZip.utils.string2binary(r)),delete i.optimizedBinaryString);return this.files[e]=new t(e,r,i)},a=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},o=function(t){if("/"!=t.slice(-1)&&(t+="/"),!this.files[t]){var e=a(t);e&&o.call(this,e),i.call(this,t,null,{dir:!0})}return this.files[t]},u=function(t,r,n){var i=r!==t.name,a=t.asBinary(),o=t.options,u,s;u=o.date.getHours(),u<<=6,u|=o.date.getMinutes(),u<<=5,u|=o.date.getSeconds()/2,s=o.date.getFullYear()-1980,s<<=4,s|=o.date.getMonth()+1,s<<=5,s|=o.date.getDate();var l=null!==a&&0!==a.length;if(n=o.compression||n,!JSZip.compressions[n])throw n+" is not a valid compression method !";var c=JSZip.compressions[n],d=l?c.compress(a):"",f="";return f+="\n\x00",f+=i?"\x00\b":"\x00\x00",f+=l?c.magic:JSZip.compressions.STORE.magic,f+=e(u,2),f+=e(s,2),f+=l?e(this.crc32(a),4):"\x00\x00\x00\x00",f+=l?e(d.length,4):"\x00\x00\x00\x00",f+=l?e(a.length,4):"\x00\x00\x00\x00",f+=e(r.length,2),f+="\x00\x00",{header:f,compressedData:d}};return{load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var n=[],i,a,o,u;for(i in this.files)this.files.hasOwnProperty(i)&&(o=this.files[i],u=new t(o.name,o.data,r(o.options)),a=i.slice(this.root.length,i.length),i.slice(0,this.root.length)===this.root&&e(a,u)&&n.push(u));return n},file:function(t,e,r){if(1===arguments.length){if(t instanceof RegExp){var n=t;return this.filter(function(t,e){return!e.options.dir&&n.test(t)})}return this.filter(function(e,r){return!r.options.dir&&e===t})[0]||null}return t=this.root+t,i.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(t instanceof RegExp)return this.filter(function(e,r){return r.options.dir&&t.test(e)});var e=this.root+t,r=o.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e)if(e.options.dir)for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];else delete this.files[t];return this},generate:function(t){t=r(t||{},{base64:!0,compression:"STORE",type:"base64"});var n=t.compression.toUpperCase();if(!JSZip.compressions[n])throw n+" is not a valid compression method !";var i=[],a=[],o=0;for(var s in this.files)if(this.files.hasOwnProperty(s)){var l=this.files[s],c=this.utf8encode(l.name),d="",f="",h=u.call(this,l,c,n);d=JSZip.signature.LOCAL_FILE_HEADER+h.header+c+h.compressedData,f=JSZip.signature.CENTRAL_FILE_HEADER+"\x00"+h.header+"\x00\x00\x00\x00\x00\x00"+(this.files[s].options.dir===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+e(o,4)+c,o+=d.length,a.push(d),i.push(f)}var p=a.join(""),g=i.join(""),C="";C=JSZip.signature.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+e(a.length,2)+e(a.length,2)+e(g.length,4)+e(p.length,4)+"\x00\x00";var v=p+g+C;switch(t.type.toLowerCase()){case"uint8array":return JSZip.utils.string2Uint8Array(v);case"arraybuffer":return JSZip.utils.string2Uint8Array(v).buffer;case"blob":return JSZip.utils.string2Blob(v);case"base64":return t.base64?JSZipBase64.encode(v):v;default:return v}},crc32:function(t,e){if(""===t||"undefined"==typeof t)return 0;var r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"==typeof e&&(e=0);var n=0,i=0;e=-1^e;for(var a=0,o=t.length;o>a;a++)i=255&(e^t.charCodeAt(a)),n=r[i],e=e>>>8^n;return-1^e},clone:function(){var t=new JSZip;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t},utf8encode:function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},utf8decode:function(t){for(var e="",r=0,n=0,i=0,a=0,o=0;r<t.length;)n=t.charCodeAt(r),128>n?(e+=String.fromCharCode(n),r++):n>191&&224>n?(a=t.charCodeAt(r+1),e+=String.fromCharCode((31&n)<<6|63&a),r+=2):(a=t.charCodeAt(r+1),o=t.charCodeAt(r+2),e+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&o),r+=3);return e}}}(),JSZip.compressions={STORE:{magic:"\x00\x00",compress:function(t){return t},uncompress:function(t){return t}}},JSZip.support={arraybuffer:function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array}(),uint8array:function(){return"undefined"!=typeof Uint8Array}(),blob:function(){if("undefined"==typeof ArrayBuffer)return!1;var t=new ArrayBuffer(0);try{return 0===new Blob([t],{type:"application/zip"}).size}catch(e){}try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(t),0===r.getBlob("application/zip").size}catch(e){}return!1}()},JSZip.utils={string2binary:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},string2Uint8Array:function(t){if(!JSZip.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},uint8Array2String:function(t){if(!JSZip.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},string2Blob:function(t){if(!JSZip.support.blob)throw new Error("Blob is not supported by this browser");var e=JSZip.utils.string2Uint8Array(t).buffer;try{return new Blob([e],{type:"application/zip"})}catch(r){}try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(e),n.getBlob("application/zip")}catch(r){}throw new Error("Bug : can't construct the Blob.")}};var JSZipBase64=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e,r){for(var n="",i,a,o,u,s,l,c,d=0;d<e.length;)i=e.charCodeAt(d++),a=e.charCodeAt(d++),o=e.charCodeAt(d++),u=i>>2,s=(3&i)<<4|a>>4,l=(15&a)<<2|o>>6,c=63&o,isNaN(a)?l=c=64:isNaN(o)&&(c=64),n=n+t.charAt(u)+t.charAt(s)+t.charAt(l)+t.charAt(c);return n},decode:function(e,r){var n="",i,a,o,u,s,l,c,d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)u=t.indexOf(e.charAt(d++)),s=t.indexOf(e.charAt(d++)),l=t.indexOf(e.charAt(d++)),c=t.indexOf(e.charAt(d++)),i=u<<2|s>>4,a=(15&s)<<4|l>>2,o=(3&l)<<6|c,n+=String.fromCharCode(i),64!=l&&(n+=String.fromCharCode(a)),64!=c&&(n+=String.fromCharCode(o));return n}}}(),TextCleaner=function(){function t(t){for(var e="",r=0;r<t.length;r++){for(var n=t.charCodeAt(r).toString(16).toUpperCase();n.length<4;)n="0"+n;n="\\u"+n,e+=n}return e}function e(e){return e.replace(o,function(e){var r=t(e);return i[r]||""})}for(var r=["\\u00E2\\u201A\\u00AC","\\u00C3\\u20AC","\\u00C3","\\u00E2\\u20AC\\u0161","\\u00C3\\u201A","\\u00C6\\u2019","\\u00C3\\u0192","\\u00E2\\u20AC\\u017E","\\u00C3\\u201E","\\u00E2\\u20AC\\u00A6","\\u00C3\\u2026","\\u00E2\\u20AC","\\u00C3\\u2020","\\u00E2\\u20AC\\u00A1","\\u00C3\\u2021","\\u00CB\\u2020","\\u00C3\\u02C6","\\u00E2\\u20AC\\u00B0","\\u00C3\\u2030","\\u00C5","\\u00C3\\u0160","\\u00E2\\u20AC\\u00B9","\\u00C3\\u2039","\\u00C5\\u2019","\\u00C3\\u0152","\\u00C3","\\u00C5\\u00BD","\\u00C3\\u017D","\\u00C3","\\u00C3","\\u00E2\\u20AC\\u02DC","\\u00C3\\u2018","\\u00E2\\u20AC\\u2122","\\u00C3\\u2019","\\u00E2\\u20AC\\u0153","\\u00C3\\u201C","\\u00E2\\u20AC","\\u00C3\\u201D","\\u00E2\\u20AC\\u00A2","\\u00C3\\u2022","\\u00E2\\u20AC\\u201C","\\u00C3\\u2013","\\u00E2\\u20AC\\u201D","\\u00C3\\u2014","\\u00CB\\u0153","\\u00C3\\u02DC","\\u00E2\\u201E\\u00A2","\\u00C3\\u2122","\\u00C5\\u00A1","\\u00C3\\u0161","\\u00E2\\u20AC\\u00BA","\\u00C3\\u203A","\\u00C5\\u201C","\\u00C3\\u0153","\\u00C3","\\u00C5\\u00BE","\\u00C3\\u017E","\\u00C5\\u00B8","\\u00C3\\u0178","\\u00C3","\\u00C2\\u00A1","\\u00C3\\u00A1","\\u00C2\\u00A2","\\u00C3\\u00A2","\\u00C2\\u00A3","\\u00C3\\u00A3","\\u00C2\\u00A4","\\u00C3\\u00A4","\\u00C2\\u00A5","\\u00C3\\u00A5","\\u00C2\\u00A6","\\u00C3\\u00A6","\\u00C2\\u00A7","\\u00C3\\u00A7","\\u00C2\\u00A8","\\u00C3\\u00A8","\\u00C2\\u00A9","\\u00C3\\u00A9","\\u00C2\\u00AA","\\u00C3\\u00AA","\\u00C2\\u00AB","\\u00C3\\u00AB","\\u00C2\\u00AC","\\u00C3\\u00AC","\\u00C2\\u00AD","\\u00C3\\u00AD","\\u00C2\\u00AE","\\u00C3\\u00AE","\\u00C2\\u00AF","\\u00C3\\u00AF","\\u00C2\\u00B0","\\u00C3\\u00B0","\\u00C2\\u00B1","\\u00C3\\u00B1","\\u00C2\\u00B2","\\u00C3\\u00B2","\\u00C2\\u00B3","\\u00C3\\u00B3","\\u00C2\\u00B4","\\u00C3\\u00B4","\\u00C2\\u00B5","\\u00C3\\u00B5","\\u00C2\\u00B6","\\u00C3\\u00B6","\\u00C2\\u00B7","\\u00C3\\u00B7","\\u00C2\\u00B8","\\u00C3\\u00B8","\\u00C2\\u00B9","\\u00C3\\u00B9","\\u00C2\\u00BA","\\u00C3\\u00BA","\\u00C2\\u00BB","\\u00C3\\u00BB","\\u00C2\\u00BC","\\u00C3\\u00BC","\\u00C2\\u00BD","\\u00C3\\u00BD","\\u00C2\\u00BE","\\u00C3\\u00BE","\\u00C2\\u00BF","\\u00C3\\u00BF"],n=["€","À","Á","‚","Â","ƒ","Ã","„","Ä","…","Å","†","Æ","‡","Ç","ˆ","È","‰","É","Š","Ê","‹","Ë","Œ","Ì","Í","Ž","Î","Ï","Ð","‘","Ñ","’","Ò","“","Ó","”","Ô","•","Õ","–","Ö","—","×","˜","Ø","™","Ù","š","Ú","›","Û","œ","Ü","Ý","ž","Þ","Ÿ","ß","à","¡","á","¢","â","£","ã","¤","ä","¥","å","¦","æ","§","ç","¨","è","©","é","ª","ê","«","ë","¬","ì","­","í","®","î","¯","ï","°","ð","±","ñ","²","ò","³","ó","´","ô","µ","õ","¶","ö","·","÷","¸","ø","¹","ù","º","ú","»","û","¼","ü","½","ý","¾","þ","¿","ÿ"],i={},a=0;a<r.length;a++)i[r[a]]=n[a];r.sort(function(t,e){return e.length-t.length});var o=new RegExp(r.join("|"),"g");return{ConvertWin1252ToUtf8:e}}(),parser=function(){function t(t,e){var n=e.data,i=e.name;try{var a=i.split("."),o=a.slice(-1)[0].toLowerCase(),u=i.replace("."+o,""),s=n.replace(/^data:.*;base64,/,""),l=r.decode(s),c;$.each(parser.formats,function(t,e){return e.testFormat(o,l)?(c=e.convert,!1):void 0}),$.isFunction(c)?parser.songList.push({name:u,data:c(l,u)}):parser.errorList.push("The file <strong>"+i+"</strong> cannot be parsed because <strong>."+o.toUpperCase()+"</strong> files are not supported!")}catch(d){window.console&&window.console.error(d),parser.errorList.push("There was an error reading the file <strong>"+i+"</strong>")}}function e(t){parser.songList.length&&parser.outputs[parser.outputFormat](t,parser.songList)}var r={decode:function(t){var e=window.atob(t);try{return decodeURIComponent(window.escape(e))}catch(r){return e}},encode:function(t){return window.btoa(window.unescape(encodeURIComponent(t)))}};return{utilities:r,parseFile:t,complete:e,outputFormat:null,displayError:null,songList:[],errorList:[],formats:{},outputs:{}}}();!function(){function t(t,e){for(var r=[],i=t.match(n),a=0;a<i.length;a++){var o=i[a].replace(/^{(.*)}/,"$1").split(":");r.push({name:$.trim(o[0]),value:$.trim(o[1])})}return{title:r.title||r.Title||e.replace(".txt",""),info:r}}function e(t){for(var e=[],r=t.replace(n,""),i=r.match(/(\w+(\s\d)*:[\r\n]+)*(.+[\n\r])+/gim),a=0;a<i.length;a++){var o=$.trim(i[a].replace(/\[.+?\]|{.+?}/g,"")).split(/[\r\n]+/g),u="";o[0].indexOf(":")>0&&(u=$.trim(o.shift().replace(":","")));var s=$.trim(o.join("\n"));e.push({title:u,lyrics:s})}return e}var r="chordpro";parser.formats[r]={},parser.formats[r].testFormat=function(t,e){return/txt/i.test(t)&&/^{.+:\s*.*}[\r\n]+/i.test(e)},parser.formats[r].convert=function(r,n){var i=t(r,n),a=e(r),o={title:i.title,info:i.info,slides:a};return o};var n=new RegExp(/{.+?:.+?}/gim)}(),function(){function t(t){var e=[];return t.each(function(t,n){var i=$(n),a=$.trim(i.attr("label")),o="",u=i.find("rvtextelement");$.each(u,function(){var t=$(this).attr("rtfdata"),e=parser.utilities.decode(t);o+=r(e)}),e.push({title:a,lyrics:o})}),e}function e(t){var e=["height","width","CCLISongTitle","CCLIDisplay","versionNumber","docType","creatorCode","lastDateUsed","usedCount","backgroundColor","drawingBackgroundColor"],r=[];$.each(t,function(t,n){$.inArray(n.name,e)<0&&""!==n.value&&r.push({name:n.name,value:n.value})});var n=new Date(Date.parse(t.lastdateused.value));return isNaN(n.getTime())||r.push({name:"Last Used On",value:n}),r}function r(t){var e=/\{\*?\\[^{}]+}|[{}]|\\[A-Za-z]+\n?(?:-?\d+)?[ ]?/g,r=/\\\n/g,n=t.replace(e,""),i=n.replace(r,"\n"),a=i.trim();return a}var n="pro4";parser.formats[n]={},parser.formats[n].testFormat=function(t){return t.toLowerCase().trim()===n},parser.formats[n].convert=function(r,n){var i=$(r),a=i.get(0).attributes,o=i.children("slides").children(),u=a.cclisongtitle&&a.cclisongtitle.value.length>0?a.cclisongtitle.value:n;return{title:u,info:e(a),slides:t(o)}}}(),function(){function t(t){var e=[];return t.each(function(){var t=$(this),n=t.find("RVDisplaySlide");n.each(function(){var n=$(this),i="",a=$.trim(t.attr("name")),o=$.trim(n.attr("label"));o.length&&(a+=" - "+o);var u=n.find("RVTextElement");$.each(u,function(){var t=$(this).attr("RTFData"),e=parser.utilities.decode(t);i+=r(e)}),e.push({title:a,lyrics:i})})}),e}function e(t){var e=["height","width","CCLISongTitle","CCLIDisplay","versionNumber","docType","creatorCode","lastDateUsed","usedCount","backgroundColor","drawingBackgroundColor"],r=[];$.each(t,function(t,n){$.inArray(n.name,e)<0&&""!==n.value&&r.push({name:n.name,value:n.value})});var n=new Date(Date.parse(t.lastdateused.value));return isNaN(n.getTime())||r.push({name:"Last Used On",value:n}),r}function r(t){var e=/\{\*?\\[^{}]+}|[{}]|\\[A-Za-z]+\n?(?:-?\d+)?[ ]?/g,r=/\\\n/g,n=t.replace(e,""),i=n.replace(r,"\n"),a=i.trim();return a}var n="pro5";parser.formats[n]={},parser.formats[n].testFormat=function(t){return t.toLowerCase().trim()===n},parser.formats[n].convert=function(r,n){var i=$(r).filter("RVPresentationDocument"),a=i.get(0).attributes,o=i.find("RVSlideGrouping"),u=a.CCLISongTitle&&a.CCLISongTitle.value.length>0?a.CCLISongTitle.value:n;return{title:u,info:e(a),slides:t(o)}}}(),function(){function t(t,e,r){var n=t.split(a);n=$.grep(n,function(t){var e=$.trim(t).replace(/\r\n\t/g,"");return e.length>1?e:!1}),/[0-9]{1,4}/.test(n[0])&&n.splice(0,1);var i=n.length>0&&n[0].length>0?n[0]:r;i=1===i.indexOf("$")?i.substring(1,i.length):i,i=i.substring(0,i.length-+(i.lastIndexOf("$")===i.length-1));var o=[];n[1]&&o.push({name:"Artist/Author",value:n[1]}),n[2]&&o.push({name:"Copyright",value:n[2].replace("$","")}),n[3]&&o.push({name:"CCLI",value:n[3]}),e&&o.push({name:"Keywords",value:e}),i=TextCleaner.ConvertWin1252ToUtf8(i);for(var u=0;u<o.length;u++)o[u].value=TextCleaner.ConvertWin1252ToUtf8(o[u].value);return{info:o,title:i}}function e(t){for(var e=new RegExp("^"+i+"+.{1}"+i+"+(.+)"+i+"+\\W*([\\s\\S]+)","m"),n=[],o=1;o<t.length;o++){var u=t[o].match(e),s=null!==u&&u[1]?$.trim(u[1].replace(a,"")):"",l=null!==u&&u[2]?$.trim(u[2].replace(a,"")):"";s=TextCleaner.ConvertWin1252ToUtf8(s),l=TextCleaner.ConvertWin1252ToUtf8(l),l=l.replace(/\/+/g,""),n.push({title:s,lyrics:l})}var c=r(t.slice(-1)[0]),d=!1;return c&&(0===n.length&&c.keywords.length>c.lastLyrics.length?(d=c.lastLyrics,n.push({title:"",lyrics:c.keywords.replace(/\/+/g,"")})):(d=c.keywords,n.length>0?n.slice(-1)[0].lyrics=c.lastLyrics:n.push({title:"",lyrics:c.lastLyrics.replace(/\/+/g,"")}))),{slides:n,keywords:d}}function r(t){var e=t.split(a);if(e=$.grep(e,function(t){var e=$.trim(t);return e.length>1?e:!1}),e.length>2){var r=e.splice(2).join(", ").replace(/\r\n\t/g,""),n=e[1].match(/^\W*([\s\S]+)/m)[1];return r=TextCleaner.ConvertWin1252ToUtf8(r),n=TextCleaner.ConvertWin1252ToUtf8(n),{keywords:r,lastLyrics:n}}return!1}var n="songshowplus";parser.formats[n]={},parser.formats[n].testFormat=function(t){return/sbsong/i.test(t)},parser.formats[n].convert=function(r,n){var i=r.split("<Properties>")[0].split("%"),a=e(i),o=t(i[0],a.keywords,n);return{title:o.title,info:o.info,slides:a.slides}};var i="[\\xA0\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F]",a=new RegExp(i,"g")}(),function(){var t="json";parser.formats[t]={},parser.formats[t].testFormat=function(e){return e.toLowerCase().trim()===t},parser.formats[t].convert=function(t){try{return window.console.log(JSON.parse(t)),JSON.parse(t)}catch(e){return{}}}}(),function(){function t(t){var e='<h3 class="song-title">'+t.title+"</h3>";e+='<ul class="song-info">';for(var r=0;r<t.info.length;r++){var n=t.info[r];e+="<li><strong>"+n.name+":</strong> "+n.value+"</li>"}e+='</ul><div class="slides-container row">';for(var i=0;i<t.slides.length;i++){var a=t.slides[i],o=a.title.length<1?"&nbsp;":a.title;e+='<div class="col-xs-3"><div class="thumbnail slide-content"><p class="slide-lyrics">'+a.lyrics+'</p><h6 class="slide-label">'+o+"</h6></div></div>"}return e+="</ul>"}function e(t){var e=0;t.find(".slide-lyrics").each(function(){$(this).height()>e&&(e=$(this).height())}).css({"min-height":e})}var r="display";parser.outputs[r]=function(r,n){$.each(n,function(n,i){var a=$(t(i.data));r.append(a),e(a)})}}(),function(){function t(t){var r=e(t);r+=n(0);for(var a=0;a<t.slides.length;a++){var o=t.slides[a];r+=i(a+1,o.title,o.lyrics)}return r+=n(t.slides.length+1),r+='</slides><timeline timeOffSet="0" selectedMediaTrackIndex="0" unitOfMeasure="60" duration="0" loop="0"><timeCues containerClass="NSMutableArray"></timeCues><mediaTracks containerClass="NSMutableArray"></mediaTracks></timeline><bibleReference containerClass="NSMutableDictionary"></bibleReference></RVPresentationDocument>'}function e(t){for(var e="",r="",n="",i="",a="",o="",u=new Date,s=u.getFullYear()+"-"+u.getMonth()+"-"+u.getDate()+"T"+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds(),l=0;l<t.info.length;l++){var c=t.info[l];if(/copyright/i.test(c.name)){var d=c.value.match(/(\d{4})(.*)/);d?(d.length>1&&(i=d[1]),d.length>2&&(a=d[2])):a=c.value}else/ccli/i.test(c.name)?o=c.value:/keywords/i.test(c.name)?e=c.value:/author|artist/i.test(c.name)&&(r=c.value,n=c.value)}return'<RVPresentationDocument height="768" width="1024" versionNumber="400" docType="0" creatorCode="1349676880" lastDateUsed="'+s+'" usedCount="0" category="Song" resourcesDirectory="" backgroundColor="0 0 0 1" drawingBackgroundColor="0" notes="'+e+'" artist="'+r+'" author="'+n+'" album="" CCLIDisplay="0" CCLIArtistCredits="" CCLISongTitle="'+t.title+'" CCLIPublisher="'+a+'" CCLICopyrightInfo="'+i+'" CCLILicenseNumber="'+o+'"><slides containerClass="NSMutableArray">'}function r(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function n(t){return'<RVDisplaySlide backgroundColor="0 0 0 0" enabled="1" highlightColor="0 0 0 0" hotKey="" label="" notes="" slideType="1" sort_index="'+t+'" UUID="'+r()+'" drawingBackgroundColor="0" serialization-array-index="'+t+'"><cues containerClass="NSMutableArray"></cues><displayElements containerClass="NSMutableArray"></displayElements></RVDisplaySlide>'}function i(t,e,n){var i=["{\\rtf1\\ansi\\ansicpg1252\\cocoartf1038\\cocoasubrtf320","{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}","{\\colortbl;\\red255\\green255\\blue255;}","\\pard\\tx560\\tx1120\\tx1680\\tx2240\\tx2800\\tx3360\\tx3920\\tx4480\\tx5040\\tx5600\\tx6160\\tx6720\\qc\\pardirnatural","","\\f0\\fs96 \\cf1 "+n.replace(/\r\n/g,"\\\n")+"}"].join("\n"),a=parser.utilities.encode(i),o=["",'<RVDisplaySlide backgroundColor="0 0 0 0" enabled="1" highlightColor="0 0 0 0" hotKey="" label="'+e+'" notes="" slideType="1" sort_index="'+t+'" UUID="'+r()+'" drawingBackgroundColor="0" serialization-array-index="'+t+'">','	<cues containerClass="NSMutableArray"></cues>','	<displayElements containerClass="NSMutableArray">','		<RVTextElement displayDelay="0" displayName="Default" locked="0" persistent="0" typeID="0" fromTemplate="0" bezelRadius="0" drawingFill="0" drawingShadow="0" drawingStroke="0" fillColor="1 1 1 1" rotation="0" source="" adjustsHeightToFit="0" verticalAlignment="0" RTFData="'+a+'" serialization-array-index="0">','			<_-RVRect3D-_position x="20" y="20" z="0" width="984" height="728"></_-RVRect3D-_position>','			<_-D-_serializedShadow containerClass="NSMutableDictionary">','				<NSCFNumber serialization-native-value="5" serialization-dictionary-key="shadowBlurRadius"></NSCFNumber>','				<NSCalibratedRGBColor serialization-native-value="0 0 0 0.5" serialization-dictionary-key="shadowColor"></NSCalibratedRGBColor>','				<NSCFString serialization-native-value="{3.53553, -3.53553}" serialization-dictionary-key="shadowOffset"></NSCFString>',"			</_-D-_serializedShadow>",'			<stroke containerClass="NSMutableDictionary">','				<NSCachedRGBColor serialization-native-value="0 0 0 1" serialization-dictionary-key="RVShapeElementStrokeColorKey"></NSCachedRGBColor>','				<NSCFNumber serialization-native-value="1" serialization-dictionary-key="RVShapeElementStrokeWidthKey"></NSCFNumber>',"			</stroke>","		</RVTextElement>","	</displayElements>","</RVDisplaySlide>"].join("\n");return o}function a(t,e){if(e.length>0){var r="btn-"+o+"-download-zip",n="btn-"+o+"-download-files",i="<h1>Converted "+e.length+" Song File"+(e.length>1?"s":"")+"!</h1>";e.length>1?(i+="<button id='"+r+"' type='button' class='btn btn-lg btn-primary'>Download as .zip</button>",i+=" or <button id='"+n+"' type='button' class='btn btn-default'>Download "+e.length+" individual files</button>"):i+="<button id='"+n+"' type='button' class='btn btn-lg btn-primary'>Download file</button>",t.html(i),$("#"+r).on("click",function(){var t=new JSZip;$.each(e,function(e,r){t.file(r.name+u,r.data)});var r=t.generate({type:"blob"});saveAs(r,"converted files.zip")}),$("#"+n).on("click",function(){$.each(e,function(t,e){var r=new Blob([e.data],{type:"text/xml;charset=utf-8"});saveAs(r,e.name+u)})})}}var o="pro4",u="."+o;parser.outputs[o]=function(e,r){var n=[],i=[];$.each(r,function(e,r){try{n.push({name:r.name,data:t(r.data)})}catch(a){i.push(r.name)}}),i.length&&parser.displayError(i.join(", "),"Error converting the following "+i.length+" songs!"),a(e,n)}}(),function(){function t(t){var r=e(t);r+=n(0);for(var a=0;a<t.slides.length;a++){var o=t.slides[a];r+=i(a+1,o.title,o.lyrics)}return r+=n(t.slides.length+1),r+=["","   </groups>",'   <timeline timeOffSet="0" selectedMediaTrackIndex="0" unitOfMeasure="60" duration="0" loop="0">','      <timeCues containerClass="NSMutableArray" />','      <mediaTracks containerClass="NSMutableArray" />',"   </timeline>",'   <bibleReference containerClass="NSMutableDictionary" />','   <arrangements containerClass="NSMutableArray" />',"</RVPresentationDocument>"].join("\n")}function e(t){for(var e="",r="",n="",i="",a="",o="",u=new Date,s=u.getFullYear()+"-"+u.getMonth()+"-"+u.getDate()+"T"+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds(),l=0;l<t.info.length;l++){var c=t.info[l];if(/copyright/i.test(c.name)){var d=c.value.match(/(\d{4})(.*)/);d?(d.length>1&&(i=d[1]),d.length>2&&(a=d[2])):a=c.value}else/ccli/i.test(c.name)?o=c.value:/keywords/i.test(c.name)?e=c.value:/author|artist/i.test(c.name)&&(r=c.value,n=c.value)}return['<?xml version="1.0" encoding="UTF-8"?>','<RVPresentationDocument height="768" width="1024" versionNumber="500" docType="0" creatorCode="1349676880" lastDateUsed="'+s+'" usedCount="0" category="Song" resourcesDirectory="" backgroundColor="0 0 0 1" drawingBackgroundColor="0" notes="'+e+'" artist="'+r+'" author="'+n+'" album="" CCLIDisplay="0" CCLIArtistCredits="" CCLISongTitle="'+t.title+'" CCLIPublisher="'+a+'" CCLICopyrightInfo="'+i+'" CCLILicenseNumber="'+o+'" chordChartPath="">',"",'    <_-RVProTransitionObject-_transitionObject transitionType="-1" transitionDuration="1" motionEnabled="0" motionDuration="20" motionSpeed="100" />','    <groups containerClass="NSMutableArray">'].join("\n")}function r(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function n(t){return["",'<RVSlideGrouping name="" uuid="'+r()+'" color="0 0 0 0" serialization-array-index="'+t+'">','    <slides containerClass="NSMutableArray">','        <RVDisplaySlide backgroundColor="0 0 0 0" enabled="1" highlightColor="" hotKey="" label="" notes="" slideType="1" sort_index="0" UUID="'+r()+'" drawingBackgroundColor="0" chordChartPath="" serialization-array-index="0">','            <cues containerClass="NSMutableArray" />','            <displayElements containerClass="NSMutableArray" />','            <_-RVProTransitionObject-_transitionObject transitionType="-1" transitionDuration="1" motionEnabled="0" motionDuration="20" motionSpeed="100" />',"        </RVDisplaySlide>","    </slides>","</RVSlideGrouping>"].join("\n")}function i(t,e,n){var i=["{\\rtf1\\ansi\\ansicpg1252\\cocoartf1038\\cocoasubrtf320","{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}","{\\colortbl;\\red255\\green255\\blue255;}","\\pard\\tx560\\tx1120\\tx1680\\tx2240\\tx2800\\tx3360\\tx3920\\tx4480\\tx5040\\tx5600\\tx6160\\tx6720\\qc\\pardirnatural","","\\f0\\fs96 \\cf1 "+n.replace(/\r\n/g,"\\\n")+"}"].join("\n"),a=parser.utilities.encode(i),o=["",'<RVSlideGrouping name="'+e+'" uuid="'+r()+'" color="0 0 0 0" serialization-array-index="'+t+'">','    <slides containerClass="NSMutableArray">','        <RVDisplaySlide backgroundColor="0 0 0 0" enabled="1" highlightColor="" hotKey="" label="" notes="" slideType="1" sort_index="'+t+'" UUID="'+r()+'" drawingBackgroundColor="0" chordChartPath="" serialization-array-index="0">','            <cues containerClass="NSMutableArray" />','            <displayElements containerClass="NSMutableArray">','                <RVTextElement displayDelay="0" displayName="Default" locked="0" persistent="0" typeID="0" fromTemplate="0" bezelRadius="0" drawingFill="0" drawingShadow="0" drawingStroke="0" fillColor="1 1 1 1" rotation="0" source="" adjustsHeightToFit="0" verticalAlignment="0" RTFData="'+a+'" revealType="0" serialization-array-index="0">','                    <_-RVRect3D-_position x="20" y="20" z="0" width="984" height="728" />','                    <_-D-_serializedShadow containerClass="NSMutableDictionary">','                        <NSMutableString serialization-native-value="{3.5355301, -3.5355301}" serialization-dictionary-key="shadowOffset" />','                        <NSNumber serialization-native-value="5" serialization-dictionary-key="shadowBlurRadius" />','                        <NSColor serialization-native-value="0 0 0 0.5" serialization-dictionary-key="shadowColor" />',"                    </_-D-_serializedShadow>",'                    <stroke containerClass="NSMutableDictionary">','                        <NSColor serialization-native-value="0 0 0 1" serialization-dictionary-key="RVShapeElementStrokeColorKey" />','                        <NSNumber serialization-native-value="1" serialization-dictionary-key="RVShapeElementStrokeWidthKey" />',"                    </stroke>","                </RVTextElement>","            </displayElements>",'            <_-RVProTransitionObject-_transitionObject transitionType="-1" transitionDuration="1" motionEnabled="0" motionDuration="20" motionSpeed="100" />',"        </RVDisplaySlide>","    </slides>","</RVSlideGrouping>"].join("\n");
return o}function a(t,e){if(e.length>0){var r="btn-"+o+"-download-zip",n="btn-"+o+"-download-files",i="<h1>Converted "+e.length+" Song File"+(e.length>1?"s":"")+"!</h1>";e.length>1?(i+="<button id='"+r+"' type='button' class='btn btn-lg btn-primary'>Download as .zip</button>",i+=" or <button id='"+n+"' type='button' class='btn btn-default'>Download "+e.length+" individual files</button>"):i+="<button id='"+n+"' type='button' class='btn btn-lg btn-primary'>Download file</button>",t.html(i),$("#"+r).on("click",function(){var t=new JSZip;$.each(e,function(e,r){t.file(r.name+u,r.data)});var r=t.generate({type:"blob"});saveAs(r,"converted files.zip")}),$("#"+n).on("click",function(){$.each(e,function(t,e){var r=new Blob([e.data],{type:"text/xml;charset=utf-8"});saveAs(r,e.name+u)})})}}var o="pro5",u="."+o;parser.outputs[o]=function(e,r){var n=[],i=[];$.each(r,function(e,r){try{n.push({name:r.name,data:t(r.data)})}catch(a){i.push(r.name)}}),i.length&&parser.displayError(i.join(", "),"Error converting the following "+i.length+" songs!"),a(e,n)}}(),function(){function t(t){for(var e="Title: "+t.title,r=0;r<t.info.length;r++){var n=t.info[r];n.name&&n.value&&(e+="\r\n",e+=n.name+": "+n.value)}e+="\r\n\r\n";for(var i=0;i<t.slides.length;i++){var a=t.slides[i];(a.title.length>0||a.lyrics.length>0)&&(e+=a.title,e+="\r\n",e+=a.lyrics,i<t.slides.length-1&&(e+="\r\n\r\n"))}return e}function e(t,e){if(e.length>0){var i="btn-"+r+"-download-zip",a="btn-"+r+"-download-files",o="<h1>Converted "+e.length+" Song File"+(e.length>1?"s":"")+"!</h1>";e.length>1?(o+="<button id='"+i+"' type='button' class='btn btn-lg btn-primary'>Download as .zip</button>",o+=" or <button id='"+a+"' type='button' class='btn btn-default'>Download "+e.length+" individual files</button>"):o+="<button id='"+a+"' type='button' class='btn btn-lg btn-primary'>Download file</button>",t.html(o),$("#"+i).on("click",function(){var t=new JSZip;$.each(e,function(e,r){t.file(r.name+n,r.data)});var r=t.generate({type:"blob"});saveAs(r,"converted files.zip")}),$("#"+a).on("click",function(){$.each(e,function(t,e){var r=new Blob([e.data],{type:"text/xml;charset=utf-8"});saveAs(r,e.name+n)})})}}var r="text",n=".txt";parser.outputs[r]=function(r,n){var i=[],a=[];$.each(n,function(e,r){try{i.push({name:r.name,data:t(r.data)})}catch(n){a.push(r.name)}}),a.length&&parser.displayError(a.join(", "),"Error converting the following "+a.length+" songs!"),e(r,i)}}(),function(){function t(t,n){if(n.length>0){var i="btn-"+e+"-download-zip",a="btn-"+e+"-download-files",o="<h1>Converted "+n.length+" Song File"+(n.length>1?"s":"")+"!</h1>";n.length>1?(o+="<button id='"+i+"' type='button' class='btn btn-lg btn-primary'>Download as .zip</button>",o+=" or <button id='"+a+"' type='button' class='btn btn-default'>Download "+n.length+" individual files</button>"):o+="<button id='"+a+"' type='button' class='btn btn-lg btn-primary'>Download file</button>",t.html(o),$("#"+i).on("click",function(){var t=new JSZip;$.each(n,function(e,n){t.file(n.name+r,n.data)});var e=t.generate({type:"blob"});saveAs(e,"converted files.zip")}),$("#"+a).on("click",function(){$.each(n,function(t,e){var n=new Blob([e.data],{type:"text/xml;charset=utf-8"});saveAs(n,e.name+r)})})}}var e="json",r="."+e;parser.outputs[e]=function(e,r){var n=[],i=[];$.each(r,function(t,e){try{n.push({name:e.name,data:JSON.stringify(e.data,null,2)})}catch(r){i.push(e.name)}}),i.length&&parser.displayError(i.join(", "),"Error converting the following "+i.length+" songs!"),t(e,n)}}();
//# sourceMappingURL=./parser-min.js.map