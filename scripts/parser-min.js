var parser=function(){function e(e,t){if(o)r(e,t);else try{r(e,t)}catch(n){window.console&&window.console.error(n),parser.errorList.push("There was an error reading the file <strong>"+t.name+"</strong>")}}function r(e,r){var t=r.name.split("."),o=t.slice(-1)[0].toLowerCase(),s=r.name.replace("."+o,"");if(r.data){var a=r.data.replace(/^data:.*;base64,/,""),i=n.decode(a),p;if($.each(parser.formats,function(e,r){return r.testFormat(o,i)?(p=r.convert,!1):void 0}),$.isFunction(p)){var c=p(i,s);if($.isArray(c))for(var l=0;l<c.length;l++)parser.songList.push({name:s+"("+c[l].title+")",data:c[l]});else parser.songList.push({name:s,data:c})}else parser.errorList.push("The file <strong>"+r.name+"</strong> cannot be parsed either because <strong>."+o.toUpperCase()+"</strong> files are not supported, or this file is improperly formatted!")}else parser.errorList.push("It looks like <strong>"+r.name+"</strong> might be a folder, which LyricConverter can't read! Be sure to drop the actual files onto LyricConverter, <em>not a folder</em>!")}function t(e){parser.songList.length&&parser.outputs[parser.outputFormat](parser.songList,e)}var o=isDev,n={decode:function(e){var r=window.atob(e);try{return decodeURIComponent(window.escape(r))}catch(t){return r}},encode:function(e){return window.btoa(window.unescape(encodeURIComponent(e)))},stripRtf:function(e){var r=/\{\*?\\[^{}]+;}|[{}]|\\[A-Za-z]+\n?(?:-?\d+)?[ ]?/g,t=/\\\n/g,o=/\n\\f[0-9]\s/g;return e.replace(o,"").replace(r,"").replace(t,"\n").trim()}};return{utilities:n,parseFile:e,complete:t,outputFormat:null,displayError:null,displaySuccessHtml:null,songList:[],errorList:[],formats:{},outputs:{}}}();