!function(){function e(e,r){var o=['<div style="width: 90%; margin-left: -45%;" class="modal" tabindex="-1" role="dialog" aria-labelledby="unsupportedModalLabel" aria-hidden="true">','   <div class="modal-header">','       <h2 id="unsupportedModalLabel" class="text-error">'+e+"</h2>","   </div>",'   <div class="modal-body">','       <p style="font-size:22x;">'+r+"</p>","   </div>","</div>"].join("");Modernizr.load({test:$.fn.modal,load:["scripts/bootstrap/bootstrap-modal.js","styles/bootstrap-assets/modals.css"],complete:function(){$(o).modal({keyboard:!1,backdrop:"static"})}})}function r(){y=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile|Windows Phone|Zune/i.test(navigator.userAgent),y&&e("Unsupported Device!","Sorry, LyricConverter cannot be used on mobile devices!<br/><br/>Please use a desktop computer that supports file uploads and downloads.")}function o(){Modernizr.load({test:window.atob&&window.btoa,nope:"scripts/plugins/base64.js"}),Modernizr.draganddrop&&window.FileReader?d():e("Unsupported Browser!","Sorry, you won't be able to use LyricConverter because your browser does not support file drag-n-drop!<br/><br/>Try using a modern browser like <a href='www.google.com/chrome'>Google Chrome</a> instead!")}function a(){p=$("#header"),f=$("#main"),g=$("#begin-area"),h=$("#display-area"),v=$("#drop-area-more"),m=$("#output"),b=$("#parser-error-display"),M=$("#many-songs-please-donate"),x=$("#total-song-count")}function t(){function e(a){var t=Math.floor(Math.random()*r)+1,n=p.css("background-image"),s=n.match(o);if(a&&t===parseInt(s[1],10))return void e(!0);var i=n.replace(s[0],"header-"+t+".jpg");p.css("background-image",i)}var r=8,o=/header-(\d+)\.jpg/;e(!1),p.on("click",function(r){"A"!==r.target.tagName&&e(!0)})}function n(){var e=$(window),r=2.4,o=350,a=20,t=-(o-p.outerHeight());e.on("scroll",function(){var o=-(e.scrollTop()/r)-a;t>=o?o=t:o>=0&&(o=0);var n="50% "+o+"px";p.css("backgroundPosition",n)})}function s(){var e="nav-current",r=f.children(".js-main-section"),o=f.find(".nav-sidebar a");$("#main-nav").children("a").on("click",function(o){var a=$(this),t=a.attr("href").replace("#","");a.addClass(e).siblings().removeClass(e),r.hide(),$("#"+t).show(),o.preventDefault()}),o.on("click",function(r){var o=$(this);o.addClass(e).siblings().removeClass(e);var a=o.data("format");parser.outputFormat=a,I._create(_,a,C),r.preventDefault()});var a=I._read(_),t=$([]);null!==a&&(t=o.filter('[data-format="'+a+'"]')),0===t.length&&(t=o.first()),t.triggerHandler("click");var n=$("#affix-contents"),s=n.offset().top-parseInt(p.css("margin-bottom"),10);n.affix({offset:{top:s}})}function i(){D=parseInt(I._read(j)),isNaN(D)&&(D=0,I._create(j,D,C)),$("#donate-nag-no-thanks").one("click",function(){L=!1,M.fadeOut(w)})}function d(){parser.displayError=u,$("html").fileDragAndDrop(function(e){if(c(),parser.errorList=[],parser.songList=[],$.each(e,parser.parseFile),parser.complete(m),l(parser.songList.length),parser.errorList.length){var r=1==parser.errorList.length?"One song ran into an error and could not be converted":"We ran into errors with "+parser.errorList.length+" of the songs, and they were not converted";u(parser.errorList.join("<br/>"),r)}})}function l(e){D+=e,I._create(j,D,C),L&&D>k&&(M.show(),$("#total-song-count").text(D))}function c(){g.hide(),h.fadeIn(w),v.fadeIn(w),m.empty(),b.empty().hide()}function u(e,r){var o="";r&&r.length&&(o+="<h3>"+r+"</h3>"),o+="<p>"+e+"</p>",b.show().html(o)}var p,f,g,h,v,m,b,w=400,y=!1,k=100,L=!0,M,x,C=365,_="last-used-format",j="total-converted-song-count",D=0;$(function(){a(),r(),y||(t(),n(),s(),o(),i())});var I={_create:function(e,r,o){if(o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var t="; expires="+a.toGMTString()}else var t="";document.cookie=e+"="+r+t+"; path=/"},_read:function(e){for(var r=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(var t=o[a];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(r))return t.substring(r.length,t.length)}return null},_erase:function(e){createCookie(e,"",-1)}}}();