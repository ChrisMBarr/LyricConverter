/*=====================================================
 * PARSER for SongShowPlus files
 * Extension: .sbsong
 * Site: http://www.songshowplus.com/
=======================================================*/(function(){function e(e,t){var n=e.split(r.invisibles);n=$.grep(n,function(e){var t=$.trim(e);return t.length>1?t:!1});/[0-9]{1,4}/.test(n[0])&&n.splice(0,1);var i=n[0],s=[];s.push({name:"Artist/Author",value:n[1]});s.push({name:"Copyright",value:n[2].replace("$","")});n[3]&&s.push({name:"CCLI",value:n[3]});t&&s.push({name:"Keywords",value:t});return{info:s,title:i}}function t(e){var t=/^[\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+.{1}[\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+(.+)[\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]+\W*([\s\S]+)/m,i=[];for(var s=1;s<e.length;s++){var o=e[s].match(t),u=$.trim(o[1]),a=$.trim(o[2].replace(r.invisibles,""));i.push({title:u,lyrics:a})}var f=n(e.slice(-1)[0]),l=!1;if(f){l=f.keywords;i.slice(-1)[0].lyrics=f.lastLyrics}return{slides:i,keywords:l}}function n(e){var t=e.split(r.invisibles);t=$.grep(t,function(e){var t=$.trim(e);return t.length>1?t:!1});if(t.length>2){var n=t.splice(2).join(", "),i=t[1].match(/^\W*([\s\S]+)/m)[1];return{keywords:n,lastLyrics:i}}return!1}parser.formats.sbsong=function(n){var r=n.split("<Properties>")[0].split("%"),i=t(r),s=e(r[0],i.keywords);return{title:s.title,info:s.info,slides:i.slides}};var r={invisibles:/[\xA0\x00-\x09\x0B\x0C\x0E-\x1F\x7F]/}})();