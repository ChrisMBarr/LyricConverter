var parser=function(){function s(e){t.show().html(e)}var e,t,n,r={pageInit:function(){e=$("#drop-area");t=$("#error-display");n=$("#js-output");if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile|Windows Phone|Zune/i.test(navigator.userAgent)){s("Sorry, SongParserJS this cannot be used on mobile devices!");e.hide();n.hide()}else if(Modernizr.draganddrop&&window.FileReader){Modernizr.load({test:window.atob&&window.btoa,nope:"js/base64.js"});r.fileDragAndDrop()}else s("Your browser does not support file Drag-N-Drop!")},fileDragAndDrop:function(){e.fileDragAndDrop(function(e,r){t.empty().hide();try{var o=r.split("."),u=fileParts[0],a=fileParts.slice(-1)[0].toLowerCase();if($.isFunction(parser.formats[a])){var f=e.replace(/^data:.*;base64,/,""),l=i.decode(f),c=parser.formats[a](l,u);parser.outputs[n.val()](c)}else s("The file <strong>"+r+"</strong> cannot be parsed because <strong>."+a.toUpperCase()+"</strong> is not a supported file type!")}catch(h){s("There was an error reading the file <strong>"+r+"</strong>")}})}},i={decode:function(e){var t=window.atob(e);try{return decodeURIComponent(escape(t))}catch(n){return t}},encode:function(e){return window.btoa(unescape(encodeURIComponent(e)))}};$(r.pageInit);return{utilities:i,displayError:s,formats:{},outputs:{}}}();